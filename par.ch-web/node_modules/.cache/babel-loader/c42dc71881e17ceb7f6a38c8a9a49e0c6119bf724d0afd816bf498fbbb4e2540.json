{"ast":null,"code":"function ModelViewer(){ViewerUI.downloadScreen.onclick=function(){const canvas=renderer.domElement;renderAll();const image=canvas.toDataURL(\"image/png\");const a=document.createElement(\"a\");a.href=image.replace(/^data:image\\/[^;]/,'data:application/octet-stream');a.download=\"image.png\";a.click();};ViewerUI.explodeFace.onclick=function(){explodeFace=this.checked;resetExplode();explode();};let cubeCameraDistance=1.75;let cubeWrapper=ViewerUI.cubeWrapper;let cubeScene=new THREE.Scene();let cubeCamera=new THREE.PerspectiveCamera(70,cubeWrapper.offsetWidth/cubeWrapper.offsetHeight,0.1,100);let cubeRenderer=new THREE.WebGLRenderer({alpha:true,antialias:true,preserveDrawingBuffer:true});cubeRenderer.setSize(cubeWrapper.offsetWidth,cubeWrapper.offsetHeight);cubeRenderer.setPixelRatio(window.deivicePixelRatio);cubeWrapper.appendChild(cubeRenderer.domElement);let materials=[];let texts=['RIGHT','LEFT','TOP','BOTTOM','FRONT','BACK'];let textureLoader=new THREE.TextureLoader();let canvas=document.createElement('canvas');let ctx=canvas.getContext('2d');let size=64;canvas.width=size;canvas.height=size;ctx.font='bolder 12px \"Open sans\", Arial';ctx.textBaseline='middle';ctx.textAlign='center';let mainColor='#fff';let otherColor='#ccc';let bg=ctx.createLinearGradient(0,0,0,size);bg.addColorStop(0,mainColor);bg.addColorStop(1,otherColor);for(let i=0;i<6;i++){if(texts[i]=='TOP'){ctx.fillStyle=mainColor;}else if(texts[i]=='BOTTOM'){ctx.fillStyle=otherColor;}else{ctx.fillStyle=bg;}ctx.fillRect(0,0,size,size);ctx.strokeStyle='#aaa';ctx.setLineDash([8,8]);ctx.lineWidth=4;ctx.strokeRect(0,0,size,size);ctx.fillStyle='#999';ctx.fillText(texts[i],size/2,size/2);materials[i]=new THREE.MeshBasicMaterial({map:textureLoader.load(canvas.toDataURL())});}let planes=[];let planeMaterial=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,color:0x00c0ff,transparent:true,opacity:0,depthTest:false});let planeSize=0.7;let planeGeometry=new THREE.PlaneGeometry(planeSize,planeSize);let a=0.51;let plane1=new THREE.Mesh(planeGeometry,planeMaterial.clone());plane1.position.z=a;cubeScene.add(plane1);planes.push(plane1);let plane2=new THREE.Mesh(planeGeometry,planeMaterial.clone());plane2.position.z=-a;cubeScene.add(plane2);planes.push(plane2);let plane3=new THREE.Mesh(planeGeometry,planeMaterial.clone());plane3.rotation.y=Math.PI/2;plane3.position.x=a;cubeScene.add(plane3);planes.push(plane3);let plane4=new THREE.Mesh(planeGeometry,planeMaterial.clone());plane4.rotation.y=Math.PI/2;plane4.position.x=-a;cubeScene.add(plane4);planes.push(plane4);let plane5=new THREE.Mesh(planeGeometry,planeMaterial.clone());plane5.rotation.x=Math.PI/2;plane5.position.y=a;cubeScene.add(plane5);planes.push(plane5);let plane6=new THREE.Mesh(planeGeometry,planeMaterial.clone());plane6.rotation.x=Math.PI/2;plane6.position.y=-a;cubeScene.add(plane6);planes.push(plane6);let groundMaterial=new THREE.MeshBasicMaterial({color:0xaaaaaa});let groundGeometry=new THREE.PlaneGeometry(1,1);let groundPlane=new THREE.Mesh(groundGeometry,groundMaterial);groundPlane.rotation.x=-Math.PI/2;groundPlane.position.y=-0.6;cubeScene.add(groundPlane);let cube=new THREE.Mesh(new THREE.BoxGeometry(1,1,1),materials);cubeScene.add(cube);function updateCubeCamera(){cubeCamera.rotation.copy(camera.rotation);let dir=camera.position.clone().sub(controller.target).normalize();cubeCamera.position.copy(dir.multiplyScalar(cubeCameraDistance));}let activePlane=null;cubeRenderer.domElement.onmousemove=function(evt){if(activePlane){activePlane.material.opacity=0;activePlane.material.needsUpdate=true;activePlane=null;}let x=evt.offsetX;let y=evt.offsetY;let size=cubeRenderer.getSize(new THREE.Vector2());let mouse=new THREE.Vector2(x/size.width*2-1,-y/size.height*2+1);let raycaster=new THREE.Raycaster();raycaster.setFromCamera(mouse,cubeCamera);let intersects=raycaster.intersectObjects(planes.concat(cube));if(intersects.length>0&&intersects[0].object!=cube){activePlane=intersects[0].object;activePlane.material.opacity=0.2;activePlane.material.needsUpdate=true;}};let startTime=0;let duration=500;let oldPosition=new THREE.Vector3();let newPosition=new THREE.Vector3();let play=false;cubeRenderer.domElement.onclick=function(evt){cubeRenderer.domElement.onmousemove(evt);if(!activePlane||hasMoved){return false;}oldPosition.copy(camera.position);let distance=camera.position.clone().sub(controller.target).length();newPosition.copy(controller.target);if(activePlane.position.x!==0){newPosition.x+=activePlane.position.x<0?-distance:distance;}else if(activePlane.position.y!==0){newPosition.y+=activePlane.position.y<0?-distance:distance;}else if(activePlane.position.z!==0){newPosition.z+=activePlane.position.z<0?-distance:distance;}//play = true;\n//startTime = Date.now();\ncamera.position.copy(newPosition);};cubeRenderer.domElement.ontouchmove=function(e){let rect=e.target.getBoundingClientRect();let x=e.targetTouches[0].pageX-rect.left;let y=e.targetTouches[0].pageY-rect.top;cubeRenderer.domElement.onmousemove({offsetX:x,offsetY:y});};cubeRenderer.domElement.ontouchstart=function(e){let rect=e.target.getBoundingClientRect();let x=e.targetTouches[0].pageX-rect.left;let y=e.targetTouches[0].pageY-rect.top;cubeRenderer.domElement.onclick({offsetX:x,offsetY:y});};ViewerUI.fileInput.addEventListener('input',function(evt){let file=evt.target.files[0];if(file){show(ViewerUI.loader);ViewerUI.loaderInfo.innerHTML='Reading file...';let reader=new FileReader();reader.onload=function(e){loadModel(e.target.result);};reader.onerror=function(err){ViewerUI.loaderInfo.innerHTML='Error reading file! See console for more info.';console.error(err);};reader.readAsDataURL(file);}});hide(ViewerUI.loader);let hasMoved=false;function antiMoveOnDown(e){hasMoved=false;}function antiMoveOnMove(e){hasMoved=true;}window.addEventListener('mousedown',antiMoveOnDown,false);window.addEventListener('mousemove',antiMoveOnMove,false);window.addEventListener('touchstart',antiMoveOnDown,false);window.addEventListener('touchmove',antiMoveOnMove,true);let showExploded=false;let explodeFactor=0;let explodeFace=!true;toggleThrough(ViewerUI.explodeSliderWrapper,ViewerUI.toggleExplode,bool=>{if(!bool){resetExplode();}else{explodeFactor=ViewerUI.explodeSlider.value;explode();}});function resetExplode(){let temp=explodeFactor;let temp2=explodeFace;explodeFace=true;explodeFactor=0;explode();explodeFace=false;explode();explodeFactor=temp;explodeFace=temp2;}toggleThrough(ViewerUI.shareSidebar,ViewerUI.toggleShare);toggleThrough(ViewerUI.modelBrowser,ViewerUI.toggleModelBrowser);ViewerUI.explodeSlider.oninput=function(){explodeFactor=this.value;explode();};function explode(){for(let i=0;i<loadedMeshes.length;i++){let node=loadedMeshes[i];if(explodeFace){let defaultPositionArray=node.defaultPositionArray;let positionArray=node.geometry.attributes.position.array;let normalArray=node.geometry.attributes.normal.array;let indexArray=node.geometry.index.array;for(let j=0;j<indexArray.length;j++){let index=indexArray[j];let position=new THREE.Vector3(defaultPositionArray[index*3],defaultPositionArray[index*3+1],defaultPositionArray[index*3+2]);let normal=new THREE.Vector3(normalArray[index*3],normalArray[index*3+1],normalArray[index*3+2]);position.add(normal.multiplyScalar(explodeFactor));positionArray[index*3]=position.x;positionArray[index*3+1]=position.y;positionArray[index*3+2]=position.z;}node.geometry.attributes.position.needsUpdate=true;node.geometry.computeBoundingBox();node.geometry.computeBoundingSphere();}else{node.position.copy(node.defaultPosition).add(node.defaultPosition.clone().normalize().multiplyScalar(explodeFactor));}}}ViewerUI.toggleZoom.onclick=function(){setZoomMode();setItemSelected(selectedModeElement,false);selectedModeElement=this;setItemSelected(this,true);};ViewerUI.togglePan.onclick=function(){setPanMode();setItemSelected(selectedModeElement,false);selectedModeElement=this;setItemSelected(this,true);};ViewerUI.toggleOrbit.onclick=function(){setOrbitMode();setItemSelected(selectedModeElement,false);selectedModeElement=this;setItemSelected(this,true);};ViewerUI.toggleMeasure.onclick=function(){isInMeasureMode=!isInMeasureMode;if(!isInMeasureMode){lineScene.remove.apply(lineScene,lineScene.children);spriteScene.remove.apply(spriteScene,spriteScene.children);}setItemSelected(this,isInMeasureMode);};ViewerUI.resetBtn.onclick=ViewerUI.backToHome.onclick=function(){resetAll();};function resetAll(){controller.reset();lineScene.remove.apply(lineScene,lineScene.children);spriteScene.remove.apply(spriteScene,spriteScene.children);isInMeasureMode=false;setItemSelected(ViewerUI.toggleMeasure,false);ViewerUI.explodeSliderWrapper.style.display='none';ViewerUI.explodeFace.checked=false;explodeFace=false;setItemSelected(ViewerUI.toggleExplode,false);resetExplode();resetSelect();}function updateSelectDom(child){if(child.itemWrapper){if(child.isSelected){child.itemWrapper.querySelector('.graph-name').style.color='#03a9f4';}else{child.itemWrapper.querySelector('.graph-name').style.color='inherit';}}}function setOrbitMode(){controller.enableZoom=true;controller.enablePan=true;controller.enableRotate=true;controller.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN};}function setPanMode(){controller.enableZoom=false;controller.enablePan=true;controller.enableRotate=false;controller.mouseButtons={LEFT:THREE.MOUSE.PAN,MIDDLE:THREE.MOUSE.PAN,RIGHT:THREE.MOUSE.PAN};}function setZoomMode(){controller.enableZoom=true;controller.enablePan=false;controller.enableRotate=false;controller.mouseButtons={LEFT:THREE.MOUSE.DOLLY,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.DOLLY};}let wrapper=ViewerUI.canvasWrapper;let scene=new THREE.Scene();let camera=new THREE.PerspectiveCamera(70,wrapper.offsetWidth/wrapper.offsetHeight,0.1,1000);let renderer=new THREE.WebGLRenderer({antialias:true,alpha:false});renderer.setClearColor(new THREE.Color(ViewerBG));renderer.autoClear=false;renderer.setPixelRatio(window.deivicePixelRatio);let isInMeasureMode=false;let lineScene=new THREE.Scene();let spriteScene=new THREE.Scene();function makeCircleImage(){let canvas=document.createElement('canvas');let ctx=canvas.getContext('2d');let size=32;canvas.width=size;canvas.height=size;let r=size*0.8/2;let blur=size-r;ctx.shadowBlur=5;ctx.shadowColor='#555';ctx.fillStyle='#fff';ctx.beginPath();ctx.arc(size/2,size/2,r,0,Math.PI*2);ctx.closePath();ctx.fill();ctx.shadowBlur=0;ctx.fillStyle='#009bff';ctx.beginPath();ctx.arc(size/2,size/2,r*0.5,0,Math.PI*2);ctx.closePath();ctx.fill();return canvas;}let circleTexture=new THREE.CanvasTexture(makeCircleImage());let circleMaterial=new THREE.SpriteMaterial({map:circleTexture,sizeAttenuation:false});let circleSprite=new THREE.Sprite(circleMaterial);circleSprite.scale.setScalar(0.08);let lineMaterial=new THREE.LineBasicMaterial({color:0x009bff,linewidth:10});let activeLine=null;renderer.domElement.onclick=function(evt){if(hasMoved){return false;}evt=evt||window.event;let x=evt.offsetX;let y=evt.offsetY;let size=renderer.getSize(new THREE.Vector2());let mouse=new THREE.Vector2(x/size.width*2-1,-y/size.height*2+1);let raycaster=new THREE.Raycaster();raycaster.setFromCamera(mouse,camera);let intersects=raycaster.intersectObjects(loadedMeshes);if(!isInMeasureMode){resetSelect();}if(intersects.length>0){if(isInMeasureMode){let point=intersects[0].point;if(!activeLine){let sprite1=circleSprite.clone();let sprite2=circleSprite.clone();sprite1.position.copy(point.clone());sprite2.position.copy(point.clone());spriteScene.add(sprite1);spriteScene.add(sprite2);let lineGeometry=new THREE.Geometry();lineGeometry.vertices.push(sprite1.position,sprite2.position);let line=new THREE.Line(lineGeometry,lineMaterial);line.sprite1=sprite1;line.sprite2=sprite2;lineScene.add(line);activeLine=line;}else{activeLine.geometry.vertices[1].copy(point);activeLine.geometry.verticesNeedUpdate=true;makeDistanceSprite();activeLine=null;}}else{let mesh=intersects[0].object;mesh.isSelected=true;updateMeshInteractionMaterial(mesh);}}else{if(isInMeasureMode){if(activeLine){lineScene.remove(activeLine);spriteScene.remove(activeLine.sprite1);spriteScene.remove(activeLine.sprite2);activeLine=null;}}}};function resetSelect(){scene.traverse(child=>{child.isSelected=false;if(child.isMesh&&child.material){updateMeshInteractionMaterial(child);}updateSelectDom(child);});}renderer.domElement.onmousemove=function(evt){evt=evt||window.event;if(!isInMeasureMode){return;}let x=evt.offsetX;let y=evt.offsetY;let size=renderer.getSize(new THREE.Vector2());let mouse=new THREE.Vector2(x/size.width*2-1,-y/size.height*2+1);let raycaster=new THREE.Raycaster();raycaster.setFromCamera(mouse,camera);let intersects=raycaster.intersectObjects(loadedMeshes);if(isInMeasureMode&&activeLine){if(intersects.length>0){let point=intersects[0].point;activeLine.geometry.vertices[1].copy(point);activeLine.geometry.verticesNeedUpdate=true;}else{activeLine.geometry.vertices[1].copy(activeLine.geometry.vertices[0]);activeLine.geometry.verticesNeedUpdate=true;}}};/*renderer.domElement.ontouchmove = function(e) {\n\t\tlet rect = e.target.getBoundingClientRect();\n\t\tlet x = e.targetTouches[0].pageX - rect.left;\n\t\tlet y = e.targetTouches[0].pageY - rect.top;\n\t\trenderer.domElement.onmousemove({\n\t\t\toffsetX: x,\n\t\t\toffsetY: y\n\t\t});\n\t}*/renderer.domElement.ontouchstart=function(e){let rect=e.target.getBoundingClientRect();let x=e.targetTouches[0].pageX-rect.left;let y=e.targetTouches[0].pageY-rect.top;renderer.domElement.onclick({offsetX:x,offsetY:y});};function makeDistanceSprite(){let canvas=document.createElement('canvas');let ctx=canvas.getContext('2d');let fontsize=32;ctx.font='bolder '+fontsize+'px \"Open Sans\", Arial';let v=activeLine.geometry.vertices;let length=v[0].clone().sub(v[1]).length().toFixed(1);let text='~ '+length;let size=ctx.measureText(text);let paddingLeft=20;let paddingTop=10;let margin=10;canvas.width=size.width+paddingLeft*2+margin*2;canvas.height=fontsize+paddingTop*2+margin*2;ctx.shadowBlur=10;ctx.shadowColor='#555';ctx.fillStyle='#009bff';roundRect(ctx,margin,margin,canvas.width-margin*2,canvas.height-margin*2,10);ctx.shadowBlur=0;ctx.fillStyle='#fff';ctx.textAlign='left';ctx.textBaseline='top';ctx.font='bolder '+fontsize+'px \"Open Sans\", Arial';ctx.fillText(text,paddingLeft+margin,paddingTop+margin);let texture=new THREE.CanvasTexture(canvas);let sprite=new THREE.Sprite(new THREE.SpriteMaterial({map:texture,sizeAttenuation:false}));let h=0.7;sprite.scale.set(0.002*canvas.width,0.0025*canvas.height).multiplyScalar(h);sprite.position.copy(v[0].clone().add(v[1]).multiplyScalar(0.5));spriteScene.add(sprite);}function roundRect(ctx,x,y,w,h,r){ctx.beginPath();ctx.moveTo(x+r,y);ctx.lineTo(x+w-r,y);ctx.quadraticCurveTo(x+w,y,x+w,y+r);ctx.lineTo(x+w,y+h-r);ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h);ctx.lineTo(x+r,y+h);ctx.quadraticCurveTo(x,y+h,x,y+h-r);ctx.lineTo(x,y+r);ctx.quadraticCurveTo(x,y,x+r,y);ctx.closePath();ctx.fill();}function updateMeshInteractionMaterial(mesh){if(mesh.isHidden){mesh.interactionMaterial.color=hiddenColor;mesh.interactionMaterial.opacity=hiddenAlpha;}else{mesh.interactionMaterial.opacity=1;}if(mesh.isSelected){mesh.interactionMaterial.color=selectColor;mesh.itemWrapper.querySelector('.graph-name').style.color='#03a9f4';}else{mesh.itemWrapper.querySelector('.graph-name').style.color='inherit';}mesh.interactionMaterial.needsUpdate=true;if(!mesh.isSelected&&!mesh.isHidden){mesh.material=mesh.defaultMaterial;}else{mesh.material=mesh.interactionMaterial;}}function onResize(){let width=wrapper.offsetWidth;let height=wrapper.offsetHeight;renderer.setSize(width,height,false);camera.aspect=width/height;camera.updateProjectionMatrix();}onResize();wrapper.appendChild(renderer.domElement);window.addEventListener('resize',onResize,false);let gltfLoader=new THREE.GLTFLoader();let loadedScene=null;let loadedMeshes=[];let d=5;let selectColor=new THREE.Color('#42006b');let hiddenColor=new THREE.Color('#555');let hiddenAlpha=0.3;let interactionMaterial=new THREE.MeshPhongMaterial({transparent:true,color:selectColor,side:THREE.DoubleSide,precision:'mediump'});function loadModel(url){resetAll();if(loadedScene){scene.remove(loadedScene);loadedScene=null;loadedMeshes.length=0;}show(ViewerUI.loader);ViewerUI.modelBrowserContent.innerHTML='';ViewerUI.loaderInfo.innerHTML='Loading model...';gltfLoader.load(url,function onLoad(gltf){loadedScene=gltf.scene;scene.add(gltf.scene);gltf.scene=gltf.scene||gltf.scenes[0];let object=gltf.scene;const box=new THREE.Box3().setFromObject(object);const size=box.getSize(new THREE.Vector3()).length();const center=box.getCenter(new THREE.Vector3());controller.reset();object.position.x+=object.position.x-center.x;object.position.y+=object.position.y-center.y;object.position.z+=object.position.z-center.z;controller.maxDistance=size*10;camera.near=size/100;camera.far=size*100;camera.updateProjectionMatrix();camera.position.copy(center);camera.position.x+=size/2.0;camera.position.y+=size/5.0;camera.position.z+=size/2.0;directionalLight.position.setScalar(size);camera.lookAt(center);controller.saveState();gltf.scene.traverse(node=>{if(node.isMesh&&node.material){node.geometry.computeBoundingBox();node.material.side=THREE.DoubleSide;node.material.precision='mediump';node.material.needsUpdate=true;node.interactionMaterial=interactionMaterial.clone();node.defaultMaterial=node.material;node.defaultPositionArray=Array.from(node.geometry.attributes.position.array);node.defaultPosition=node.position.clone();loadedMeshes.push(node);}});let content=ViewerUI.modelBrowserContent;let counter=0;let parentLevel=0;function makeSceneGraph(obj){if(obj.children.length===0&&!obj.isMesh){return;}let itemWrapper=document.createElement('div');itemWrapper.classList.add('graph-item-wrapper');let item=document.createElement('div');item.classList.add('graph-item');itemWrapper.appendChild(item);content.appendChild(itemWrapper);let n=0;let obj2=obj;while(obj2!=gltf.scene){obj2=obj2.parent;n++;}item.style.paddingLeft=n*1.5+'em';obj.itemWrapper=itemWrapper;let left=document.createElement('div');left.classList.add('graph-left');let right=document.createElement('div');right.classList.add('graph-right');item.appendChild(left);item.appendChild(right);if(obj.children.length>0){parentLevel++;let folder=document.createElement('div');folder.style.marginRight='10px';folder.classList.add('graph-folder');folder.innerHTML='<i class=\"fa fa-folder-open\"></i>';left.appendChild(folder);obj.isFolderOpen=true;obj.openFolder=function(){folder.innerHTML=obj.isFolderOpen?'<i class=\"fa fa-folder-open\"></i>':'<i class=\"fa fa-folder\"></i>';obj.traverse(child=>{if(obj===child){return;}if(child.itemWrapper){if(child.parent.isFolderOpen&&obj.isFolderOpen){child.itemWrapper.style.display='block';}if(!obj.isFolderOpen){child.itemWrapper.style.display='none';}}});};folder.onclick=()=>{obj.isFolderOpen=!obj.isFolderOpen;obj.openFolder();};for(let i=0;i<obj.children.length;i++){makeSceneGraph(obj.children[i]);}}let name=document.createElement('div');name.classList.add('graph-name');name.innerHTML=obj.name||'None';left.appendChild(name);name.onclick=function(){resetSelect();obj.traverse(child=>{child.isSelected=true;if(child.isMesh&&child.material){updateMeshInteractionMaterial(child);}updateSelectDom(child);});};let visible=document.createElement('div');visible.classList.add('graph-visible');visible.innerHTML='<i class=\"fa fa-eye\"></i>';obj.showMesh=function(){visible.innerHTML=obj.isMeshVisible?'<i class=\"fa fa-eye\"></i>':'<i class=\"fa fa-eye-slash\"></i>';obj.traverse(child=>{if(child.itemWrapper){let eye=child.itemWrapper.querySelector('.graph-visible');eye.innerHTML=obj.isMeshVisible?'<i class=\"fa fa-eye\"></i>':'<i class=\"fa fa-eye-slash\"></i>';eye.style.color=obj.isMeshVisible?'inherit':'rgba(0, 0, 0, 0.3)';}if(child.isMesh&&child.material){child.isHidden=!obj.isMeshVisible;updateMeshInteractionMaterial(child);}});};obj.isHidden=false;obj.isSelected=false;obj.isMeshVisible=true;visible.onclick=function(){obj.isMeshVisible=!obj.isMeshVisible;obj.showMesh();};right.appendChild(visible);}makeSceneGraph(gltf.scene);hide(ViewerUI.loader);},function onProgress(xhr){ViewerUI.loaderInfo.innerHTML=Math.round(xhr.loaded/xhr.total*100)+'% loaded';},function onError(err){ViewerUI.loaderInfo.innerHTML='Error loading model! See console for more info.';console.error('Error loading model!',err);});}let controller=new THREE.OrbitControls(camera,renderer.domElement);controller.enabled=true;controller.enableDamping=true;controller.dampingFactor=0.5;controller.screenSpacePanning=true;let cubeController=new THREE.OrbitControls(camera,cubeRenderer.domElement);cubeController.enablePan=false;cubeController.enableZoom=false;cubeController.rotateSpeed=0.125;let selectedModeElement=ViewerUI.toggleOrbit;setOrbitMode();camera.position.z=d;camera.lookAt(scene.position);controller.update();controller.saveState();let ambientLight=new THREE.AmbientLight();ambientLight.intensity=1;scene.add(ambientLight);let directionalLight=new THREE.DirectionalLight();directionalLight.position.set(200,200,200);directionalLight.intensity=0.5;scene.add(directionalLight);/*let light1 = new THREE.PointLight(0xffffff);\n\tlight1.position.set(100, 100, 100);\n\tscene.add(light1);\n\t\n\tlet light2 = new THREE.PointLight(0xffffff);\n\tlight2.position.set(100, 100, -100);\n\tscene.add(light2);\n\t\n\tlet light3 = new THREE.PointLight(0xffffff);\n\tlight3.position.set(-100, 100, 100);\n\tscene.add(light3);\n\t\n\tlet light4 = new THREE.PointLight(0xffffff);\n\tlight4.position.set(-100, 100, -100);\n\tscene.add(light4);\n\t\n\tlight1.intensity = light2.intensity = light3.intensity = light4.intensity = 0.3;*/let stop=false;function renderAll(){renderer.clear();renderer.render(scene,camera);updateCubeCamera();cubeRenderer.render(cubeScene,cubeCamera);renderer.clearDepth();if(isInMeasureMode){renderer.clearDepth();renderer.render(lineScene,camera);renderer.clearDepth();renderer.render(spriteScene,camera);}}function animate(time){if(stop){return;}if(play){let now=Date.now();let x=Math.min(1,(now-startTime)/duration);camera.position.copy(oldPosition).lerp(newPosition,x);if(x===1){play=false;}}requestAnimationFrame(animate);controller.update();renderAll();}requestAnimationFrame(animate);return{loadModel:loadModel};}","map":{"version":3,"names":["ModelViewer","ViewerUI","downloadScreen","onclick","canvas","renderer","domElement","renderAll","image","toDataURL","a","document","createElement","href","replace","download","click","explodeFace","checked","resetExplode","explode","cubeCameraDistance","cubeWrapper","cubeScene","THREE","Scene","cubeCamera","PerspectiveCamera","offsetWidth","offsetHeight","cubeRenderer","WebGLRenderer","alpha","antialias","preserveDrawingBuffer","setSize","setPixelRatio","window","deivicePixelRatio","appendChild","materials","texts","textureLoader","TextureLoader","ctx","getContext","size","width","height","font","textBaseline","textAlign","mainColor","otherColor","bg","createLinearGradient","addColorStop","i","fillStyle","fillRect","strokeStyle","setLineDash","lineWidth","strokeRect","fillText","MeshBasicMaterial","map","load","planes","planeMaterial","side","DoubleSide","color","transparent","opacity","depthTest","planeSize","planeGeometry","PlaneGeometry","plane1","Mesh","clone","position","z","add","push","plane2","plane3","rotation","y","Math","PI","x","plane4","plane5","plane6","groundMaterial","groundGeometry","groundPlane","cube","BoxGeometry","updateCubeCamera","copy","camera","dir","sub","controller","target","normalize","multiplyScalar","activePlane","onmousemove","evt","material","needsUpdate","offsetX","offsetY","getSize","Vector2","mouse","raycaster","Raycaster","setFromCamera","intersects","intersectObjects","concat","length","object","startTime","duration","oldPosition","Vector3","newPosition","play","hasMoved","distance","ontouchmove","e","rect","getBoundingClientRect","targetTouches","pageX","left","pageY","top","ontouchstart","fileInput","addEventListener","file","files","show","loader","loaderInfo","innerHTML","reader","FileReader","onload","loadModel","result","onerror","err","console","error","readAsDataURL","hide","antiMoveOnDown","antiMoveOnMove","showExploded","explodeFactor","toggleThrough","explodeSliderWrapper","toggleExplode","bool","explodeSlider","value","temp","temp2","shareSidebar","toggleShare","modelBrowser","toggleModelBrowser","oninput","loadedMeshes","node","defaultPositionArray","positionArray","geometry","attributes","array","normalArray","normal","indexArray","index","j","computeBoundingBox","computeBoundingSphere","defaultPosition","toggleZoom","setZoomMode","setItemSelected","selectedModeElement","togglePan","setPanMode","toggleOrbit","setOrbitMode","toggleMeasure","isInMeasureMode","lineScene","remove","apply","children","spriteScene","resetBtn","backToHome","resetAll","reset","style","display","resetSelect","updateSelectDom","child","itemWrapper","isSelected","querySelector","enableZoom","enablePan","enableRotate","mouseButtons","LEFT","MOUSE","ROTATE","MIDDLE","DOLLY","RIGHT","PAN","wrapper","canvasWrapper","scene","setClearColor","Color","ViewerBG","autoClear","makeCircleImage","r","blur","shadowBlur","shadowColor","beginPath","arc","closePath","fill","circleTexture","CanvasTexture","circleMaterial","SpriteMaterial","sizeAttenuation","circleSprite","Sprite","scale","setScalar","lineMaterial","LineBasicMaterial","linewidth","activeLine","event","point","sprite1","sprite2","lineGeometry","Geometry","vertices","line","Line","verticesNeedUpdate","makeDistanceSprite","mesh","updateMeshInteractionMaterial","traverse","isMesh","fontsize","v","toFixed","text","measureText","paddingLeft","paddingTop","margin","roundRect","texture","sprite","h","set","w","moveTo","lineTo","quadraticCurveTo","isHidden","interactionMaterial","hiddenColor","hiddenAlpha","selectColor","defaultMaterial","onResize","aspect","updateProjectionMatrix","gltfLoader","GLTFLoader","loadedScene","d","MeshPhongMaterial","precision","url","modelBrowserContent","onLoad","gltf","scenes","box","Box3","setFromObject","center","getCenter","maxDistance","near","far","directionalLight","lookAt","saveState","Array","from","content","counter","parentLevel","makeSceneGraph","obj","classList","item","n","obj2","parent","right","folder","marginRight","isFolderOpen","openFolder","name","visible","showMesh","isMeshVisible","eye","onProgress","xhr","round","loaded","total","onError","OrbitControls","enabled","enableDamping","dampingFactor","screenSpacePanning","cubeController","rotateSpeed","update","ambientLight","AmbientLight","intensity","DirectionalLight","stop","clear","render","clearDepth","animate","time","now","Date","min","lerp","requestAnimationFrame"],"sources":["/Users/rahilshaik/parch/par.ch-web/src/components/model-viewer/model-viewer-component.js"],"sourcesContent":["function ModelViewer() {\n\n\tViewerUI.downloadScreen.onclick = function() {\n\t\tconst canvas = renderer.domElement;\n\t\trenderAll();\n\t\tconst image = canvas.toDataURL(\"image/png\");\n\t\tconst a = document.createElement(\"a\");\n\t\ta.href = image.replace(/^data:image\\/[^;]/, 'data:application/octet-stream');\n\t\ta.download = \"image.png\"\n\t\ta.click();\n\t}\n\n\tViewerUI.explodeFace.onclick = function() {\n\t\texplodeFace = this.checked;\n\t\tresetExplode();\n\t\texplode();\n\t}\n\n\tlet cubeCameraDistance = 1.75;\n\n\tlet cubeWrapper = ViewerUI.cubeWrapper;\n\tlet cubeScene = new THREE.Scene();\n\tlet cubeCamera = new THREE.PerspectiveCamera(70, cubeWrapper.offsetWidth / cubeWrapper.offsetHeight, 0.1, 100);\n\tlet cubeRenderer = new THREE.WebGLRenderer({\n\t\talpha: true,\n\t\tantialias: true,\n\t\tpreserveDrawingBuffer: true\n\t}); \n\n\tcubeRenderer.setSize(cubeWrapper.offsetWidth, cubeWrapper.offsetHeight);\n\tcubeRenderer.setPixelRatio(window.deivicePixelRatio);\n\n\tcubeWrapper.appendChild(cubeRenderer.domElement);\n\n\tlet materials = [];\n\tlet texts = ['RIGHT', 'LEFT', 'TOP', 'BOTTOM', 'FRONT', 'BACK'];\n\n\tlet textureLoader = new THREE.TextureLoader();\n\tlet canvas = document.createElement('canvas');\n\tlet ctx = canvas.getContext('2d');\n\t\n\tlet size = 64;\n\tcanvas.width = size;\n\tcanvas.height = size;\n\n\tctx.font = 'bolder 12px \"Open sans\", Arial';\n\tctx.textBaseline = 'middle';\n\tctx.textAlign = 'center';\n\n\tlet mainColor = '#fff';\n\tlet otherColor = '#ccc';\n\n\tlet bg = ctx.createLinearGradient(0, 0, 0, size);\n\tbg.addColorStop(0, mainColor);\n\tbg.addColorStop(1,  otherColor);\n\n\tfor (let i = 0; i < 6; i++) {\n\t\tif (texts[i] == 'TOP') {\n\t\t\tctx.fillStyle = mainColor;\n\t\t} else if (texts[i] == 'BOTTOM') {\n\t\t\tctx.fillStyle = otherColor;\n\t\t} else {\n\t\t\tctx.fillStyle = bg;\n\t\t}\n\t\tctx.fillRect(0, 0, size, size);\n\t\tctx.strokeStyle = '#aaa';\n\t\tctx.setLineDash([8, 8]);\n\t\tctx.lineWidth = 4;\n\t\tctx.strokeRect(0, 0, size, size);\n\t\tctx.fillStyle = '#999';\n\t\tctx.fillText(texts[i], size / 2, size / 2);\n\t\tmaterials[i] = new THREE.MeshBasicMaterial({\n\t\t\tmap: textureLoader.load(canvas.toDataURL())\n\t\t});\n\t}\n\n\tlet planes = [];\n\n\tlet planeMaterial = new THREE.MeshBasicMaterial({\n\t\tside: THREE.DoubleSide,\n\t\tcolor: 0x00c0ff,\n\t\ttransparent: true,\n\t\topacity: 0,\n\t\tdepthTest: false\n\t});\n\tlet planeSize = 0.7;\n\tlet planeGeometry = new THREE.PlaneGeometry(planeSize, planeSize);\n\n\tlet a = 0.51;\n\n\tlet plane1 = new THREE.Mesh(planeGeometry, planeMaterial.clone());\n\tplane1.position.z = a;\n\tcubeScene.add(plane1);\n\tplanes.push(plane1);\n\n\tlet plane2 = new THREE.Mesh(planeGeometry, planeMaterial.clone());\n\tplane2.position.z = -a;\n\tcubeScene.add(plane2);\n\tplanes.push(plane2);\n\n\tlet plane3 = new THREE.Mesh(planeGeometry, planeMaterial.clone());\n\tplane3.rotation.y = Math.PI / 2;\n\tplane3.position.x = a;\n\tcubeScene.add(plane3);\n\tplanes.push(plane3);\n\n\tlet plane4 = new THREE.Mesh(planeGeometry, planeMaterial.clone());\n\tplane4.rotation.y = Math.PI / 2;\n\tplane4.position.x = -a;\n\tcubeScene.add(plane4);\n\tplanes.push(plane4);\n\n\tlet plane5 = new THREE.Mesh(planeGeometry, planeMaterial.clone());\n\tplane5.rotation.x = Math.PI / 2;\n\tplane5.position.y = a;\n\tcubeScene.add(plane5);\n\tplanes.push(plane5);\n\n\tlet plane6 = new THREE.Mesh(planeGeometry, planeMaterial.clone());\n\tplane6.rotation.x = Math.PI / 2;\n\tplane6.position.y = -a;\n\tcubeScene.add(plane6);\n\tplanes.push(plane6);\n\n\tlet groundMaterial = new THREE.MeshBasicMaterial({\n\t\tcolor: 0xaaaaaa\n\t});\n\tlet groundGeometry = new THREE.PlaneGeometry(1, 1);\n\tlet groundPlane = new THREE.Mesh(groundGeometry, groundMaterial);\n\tgroundPlane.rotation.x = -Math.PI / 2;\n\tgroundPlane.position.y = -0.6;\n\n\tcubeScene.add(groundPlane);\n\n\tlet cube = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), materials);\n\tcubeScene.add(cube);\n\n\tfunction updateCubeCamera() {\n\t\tcubeCamera.rotation.copy(camera.rotation);\n\t\tlet dir = camera.position.clone().sub(controller.target).normalize();\n\t\tcubeCamera.position.copy(dir.multiplyScalar(cubeCameraDistance));\n\t}\n\n\tlet activePlane = null;\n\n\tcubeRenderer.domElement.onmousemove = function(evt) {\n\n\t\tif (activePlane) {\n\t\t\tactivePlane.material.opacity = 0;\n\t\t\tactivePlane.material.needsUpdate = true;\n\t\t\tactivePlane = null;\n\t\t}\n\n\t\tlet x = evt.offsetX;\n\t\tlet y = evt.offsetY;\n\t\tlet size = cubeRenderer.getSize(new THREE.Vector2());\n\t\tlet mouse = new THREE.Vector2(x / size.width * 2 - 1, -y / size.height * 2 + 1);\n\t\t\n\t\tlet raycaster = new THREE.Raycaster();\n\t\traycaster.setFromCamera(mouse, cubeCamera);\n\t\tlet intersects = raycaster.intersectObjects(planes.concat(cube));\n\n\t\tif (intersects.length > 0 && intersects[0].object != cube) {\n\t\t\tactivePlane = intersects[0].object;\n\t\t\tactivePlane.material.opacity = 0.2;\n\t\t\tactivePlane.material.needsUpdate = true;\n\t\t}\n\t}\n\n\tlet startTime = 0;\n\tlet duration = 500;\n\tlet oldPosition = new THREE.Vector3();\n\tlet newPosition = new THREE.Vector3();\n\tlet play = false;\n\n\tcubeRenderer.domElement.onclick = function(evt) {\n\n\t\tcubeRenderer.domElement.onmousemove(evt);\n\n\t\tif (!activePlane || hasMoved) {\n\t\t\treturn false;\n\t\t}\n\n\t\toldPosition.copy(camera.position);\n\n\t\tlet distance = camera.position.clone().sub(controller.target).length();\n\t\tnewPosition.copy(controller.target);\n\n\t\tif (activePlane.position.x !== 0) {\n\t\t\tnewPosition.x += activePlane.position.x < 0 ? -distance : distance;\n\t\t} else if (activePlane.position.y !== 0) {\n\t\t\tnewPosition.y += activePlane.position.y < 0 ? -distance : distance;\n\t\t} else if (activePlane.position.z !== 0) {\n\t\t\tnewPosition.z += activePlane.position.z < 0 ? -distance : distance;\n\t\t}\n\n\t\t//play = true;\n\t\t//startTime = Date.now();\n\t\tcamera.position.copy(newPosition);\n\t}\n\n\tcubeRenderer.domElement.ontouchmove = function(e) {\n\t\tlet rect = e.target.getBoundingClientRect();\n\t\tlet x = e.targetTouches[0].pageX - rect.left;\n\t\tlet y = e.targetTouches[0].pageY - rect.top;\n\t\tcubeRenderer.domElement.onmousemove({\n\t\t\toffsetX: x,\n\t\t\toffsetY: y\n\t\t});\n\t}\n\n\tcubeRenderer.domElement.ontouchstart = function(e) {\n\t\tlet rect = e.target.getBoundingClientRect();\n\t\tlet x = e.targetTouches[0].pageX - rect.left;\n\t\tlet y = e.targetTouches[0].pageY - rect.top;\n\t\tcubeRenderer.domElement.onclick({\n\t\t\toffsetX: x,\n\t\t\toffsetY: y\n\t\t});\n\t}\n\n\tViewerUI.fileInput.addEventListener('input', function(evt) {\n\t\tlet file = evt.target.files[0];\n\t\tif (file) {\n\t\t\tshow(ViewerUI.loader);\n\t\t\tViewerUI.loaderInfo.innerHTML = 'Reading file...';\n\t\t\tlet reader = new FileReader();\n\t\t\treader.onload = function(e) {\n\t\t\t\tloadModel(e.target.result);\n\t\t\t}\n\t\t\treader.onerror = function(err) {\n\t\t\t\tViewerUI.loaderInfo.innerHTML = 'Error reading file! See console for more info.';\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t\treader.readAsDataURL(file);\n\t\t}\n\t});\n\t\n\thide(ViewerUI.loader);\n\n\tlet hasMoved = false;\n\n\tfunction antiMoveOnDown(e) {\n\t\thasMoved = false;\n\t}\n\tfunction antiMoveOnMove(e) {\n\t\thasMoved = true;\n\t}\n\t\n\twindow.addEventListener('mousedown', antiMoveOnDown, false);\n\twindow.addEventListener('mousemove', antiMoveOnMove, false);\n\twindow.addEventListener('touchstart', antiMoveOnDown, false);\n\twindow.addEventListener('touchmove', antiMoveOnMove, true);\n\t\n\tlet showExploded = false;\n\tlet explodeFactor = 0;\n\tlet explodeFace = !true;\n\t\n\ttoggleThrough(ViewerUI.explodeSliderWrapper, ViewerUI.toggleExplode, (bool) => {\n\t\tif (!bool) {\n\t\t\tresetExplode();\n\t\t} else {\n\t\t\texplodeFactor = ViewerUI.explodeSlider.value;\n\t\t\texplode();\n\t\t}\n\t});\n\t\n\tfunction resetExplode() {\n\t\tlet temp = explodeFactor;\n\t\tlet temp2 = explodeFace;\n\t\texplodeFace = true;\n\t\texplodeFactor = 0;\n\t\texplode();\n\t\texplodeFace = false;\n\t\texplode();\n\t\texplodeFactor = temp;\n\t\texplodeFace = temp2;\n\t}\n\t\n\ttoggleThrough(ViewerUI.shareSidebar, ViewerUI.toggleShare);\n\ttoggleThrough(ViewerUI.modelBrowser, ViewerUI.toggleModelBrowser);\n\t\n\tViewerUI.explodeSlider.oninput = function() {\n\t\texplodeFactor = this.value;\n\t\texplode();\n\t}\n\t\n\tfunction explode() {\n\t\tfor (let i = 0; i < loadedMeshes.length; i++) {\n\t\t\t\n\t\t\tlet node = loadedMeshes[i];\n\n\t\t\tif (explodeFace) {\n\t\t\t\tlet defaultPositionArray = node.defaultPositionArray;\n\t\t\t\tlet positionArray = node.geometry.attributes.position.array;\n\t\t\t\tlet normalArray = node.geometry.attributes.normal.array;\n\t\t\t\tlet indexArray = node.geometry.index.array;\n\t\t\t\t\n\t\t\t\tfor (let j = 0; j < indexArray.length; j++) {\n\t\t\t\t\t\n\t\t\t\t\tlet index = indexArray[j]\n\t\t\t\t\tlet position = new THREE.Vector3(defaultPositionArray[index * 3], defaultPositionArray[index * 3 + 1], defaultPositionArray[index * 3 + 2]);\n\t\t\t\t\tlet normal = new THREE.Vector3(normalArray[index * 3], normalArray[index * 3 + 1], normalArray[index * 3 + 2]);\n\t\t\t\t\t\n\t\t\t\t\tposition.add(normal.multiplyScalar(explodeFactor));\n\t\t\t\t\tpositionArray[index * 3] = position.x;\n\t\t\t\t\tpositionArray[index * 3 + 1] = position.y;\n\t\t\t\t\tpositionArray[index * 3 + 2] = position.z;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnode.geometry.attributes.position.needsUpdate = true;\n\t\t\t\tnode.geometry.computeBoundingBox();\n\t\t\t\tnode.geometry.computeBoundingSphere();\n\t\t\t} else {\n\t\t\t\tnode.position.copy(node.defaultPosition).add(node.defaultPosition.clone().normalize().multiplyScalar(explodeFactor));\n\t\t\t}\n\t\t}\n\t}\n\t\n\tViewerUI.toggleZoom.onclick = function() {\n\t\tsetZoomMode();\n\t\tsetItemSelected(selectedModeElement, false);\n\t\tselectedModeElement = this;\n\t\tsetItemSelected(this, true);\n\t}\n\t\n\tViewerUI.togglePan.onclick = function() {\n\t\tsetPanMode();\n\t\tsetItemSelected(selectedModeElement, false);\n\t\tselectedModeElement = this;\n\t\tsetItemSelected(this, true);\n\t}\n\t\n\tViewerUI.toggleOrbit.onclick = function() {\n\t\tsetOrbitMode();\n\t\tsetItemSelected(selectedModeElement, false);\n\t\tselectedModeElement = this;\n\t\tsetItemSelected(this, true);\n\t}\n\t\n\tViewerUI.toggleMeasure.onclick = function() {\n\t\tisInMeasureMode = !isInMeasureMode;\n\t\tif (!isInMeasureMode) {\n\t\t\tlineScene.remove.apply(lineScene, lineScene.children);\n\t\t\tspriteScene.remove.apply(spriteScene, spriteScene.children);\n\t\t}\n\t\tsetItemSelected(this, isInMeasureMode);\n\t}\n\t\n\tViewerUI.resetBtn.onclick = ViewerUI.backToHome.onclick =function() {\n\t\tresetAll();\n\t}\n\n\tfunction resetAll() {\n\t\tcontroller.reset();\n\t\tlineScene.remove.apply(lineScene, lineScene.children);\n\t\tspriteScene.remove.apply(spriteScene, spriteScene.children);\n\t\tisInMeasureMode = false;\n\t\tsetItemSelected(ViewerUI.toggleMeasure, false);\n\t\tViewerUI.explodeSliderWrapper.style.display = 'none';\n\t\tViewerUI.explodeFace.checked = false;\n\t\texplodeFace = false;\n\t\tsetItemSelected(ViewerUI.toggleExplode, false);\n\t\tresetExplode();\n\t\tresetSelect();\n\t}\n\n\tfunction updateSelectDom(child) {\n\t\tif (child.itemWrapper) {\n\t\t\tif (child.isSelected) {\n\t\t\t\tchild.itemWrapper.querySelector('.graph-name').style.color = '#03a9f4';\n\t\t\t} else {\n\t\t\t\tchild.itemWrapper.querySelector('.graph-name').style.color = 'inherit';\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction setOrbitMode() {\n\t\tcontroller.enableZoom = true;\n\t\tcontroller.enablePan = true;\n\t\tcontroller.enableRotate = true;\n\t\tcontroller.mouseButtons = {\n\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t};\n\t}\n\t\n\tfunction setPanMode() {\n\t\tcontroller.enableZoom = false;\n\t\tcontroller.enablePan = true;\n\t\tcontroller.enableRotate = false;\n\t\tcontroller.mouseButtons = {\n\t\t\tLEFT: THREE.MOUSE.PAN,\n\t\t\tMIDDLE: THREE.MOUSE.PAN,\n\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t};\n\t}\n\t\n\tfunction setZoomMode() {\n\t\tcontroller.enableZoom = true;\n\t\tcontroller.enablePan = false;\n\t\tcontroller.enableRotate = false;\n\t\tcontroller.mouseButtons = {\n\t\t\tLEFT: THREE.MOUSE.DOLLY,\n\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\tRIGHT: THREE.MOUSE.DOLLY\n\t\t};\n\t}\n\t\n\tlet wrapper = ViewerUI.canvasWrapper;\n\tlet scene = new THREE.Scene();\n\tlet camera = new THREE.PerspectiveCamera(70, wrapper.offsetWidth / wrapper.offsetHeight, 0.1, 1000);\n\t\n\tlet renderer = new THREE.WebGLRenderer({\n\t\tantialias: true,\n\t\talpha: false\n\t});\n\t\n\trenderer.setClearColor(new THREE.Color(ViewerBG));\n\trenderer.autoClear = false;\n\trenderer.setPixelRatio(window.deivicePixelRatio);\n\n\tlet isInMeasureMode = false;\n\tlet lineScene = new THREE.Scene();\n\tlet spriteScene = new THREE.Scene();\n\n\tfunction makeCircleImage() {\n\t\tlet canvas = document.createElement('canvas');\n\t\tlet ctx = canvas.getContext('2d');\n\t\tlet size = 32;\n\t\tcanvas.width = size;\n\t\tcanvas.height = size;\n\n\t\tlet r = size * 0.8 / 2;\n\t\tlet blur = size - r;\n\t\t\n\t\tctx.shadowBlur = 5;\n\t\tctx.shadowColor = '#555';\n\n\t\tctx.fillStyle = '#fff';\n\t\tctx.beginPath();\n\t\tctx.arc(size / 2, size / 2, r, 0, Math.PI * 2);\n\t\tctx.closePath();\n\t\tctx.fill();\n\n\t\tctx.shadowBlur = 0;\n\t\tctx.fillStyle = '#009bff';\n\t\tctx.beginPath();\n\t\tctx.arc(size / 2, size / 2, r * 0.5, 0, Math.PI * 2);\n\t\tctx.closePath();\n\t\tctx.fill();\n\n\t\treturn canvas;\n\t}\n\n\tlet circleTexture = new THREE.CanvasTexture(makeCircleImage())\n\tlet circleMaterial = new THREE.SpriteMaterial({ \n\t\tmap: circleTexture,\n\t\tsizeAttenuation: false \n\t});\n\tlet circleSprite = new THREE.Sprite(circleMaterial);\n\tcircleSprite.scale.setScalar(0.08);\n\n\tlet lineMaterial = new THREE.LineBasicMaterial({\n\t\tcolor: 0x009bff,\n\t\tlinewidth: 10\n\t});\n\n\tlet activeLine = null;\n\n\trenderer.domElement.onclick = function(evt) {\n\t\tif (hasMoved) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tevt = evt || window.event;\n\t\t\n\t\tlet x = evt.offsetX;\n\t\tlet y = evt.offsetY;\n\t\tlet size = renderer.getSize(new THREE.Vector2());\n\t\tlet mouse = new THREE.Vector2(x / size.width * 2 - 1, -y / size.height * 2 + 1);\n\t\t\n\t\tlet raycaster = new THREE.Raycaster();\n\t\traycaster.setFromCamera(mouse, camera);\n\t\tlet intersects = raycaster.intersectObjects(loadedMeshes);\n\t\t\n\t\tif (!isInMeasureMode) {\n\t\t\tresetSelect();\n\t\t}\n\t\t\n\t\tif (intersects.length > 0) {\n\t\t\tif (isInMeasureMode) {\n\t\t\t\tlet point = intersects[0].point;\n\t\t\t\tif (!activeLine) {\n\t\t\t\t\tlet sprite1 = circleSprite.clone();\n\t\t\t\t\tlet sprite2 = circleSprite.clone();\n\t\t\t\t\tsprite1.position.copy(point.clone());\n\t\t\t\t\tsprite2.position.copy(point.clone());\n\t\t\t\t\tspriteScene.add(sprite1);\n\t\t\t\t\tspriteScene.add(sprite2);\n\t\t\t\t\tlet lineGeometry = new THREE.Geometry();\n\t\t\t\t\tlineGeometry.vertices.push(sprite1.position, sprite2.position);\n\t\t\t\t\tlet line = new THREE.Line(lineGeometry, lineMaterial);\n\t\t\t\t\tline.sprite1 = sprite1;\n\t\t\t\t\tline.sprite2 = sprite2;\n\t\t\t\t\tlineScene.add(line);\n\t\t\t\t\tactiveLine = line;\n\t\t\t\t} else {\n\t\t\t\t\tactiveLine.geometry.vertices[1].copy(point);\n\t\t\t\t\tactiveLine.geometry.verticesNeedUpdate = true;\n\t\t\t\t\tmakeDistanceSprite();\n\t\t\t\t\tactiveLine = null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet mesh = intersects[0].object;\n\t\t\t\tmesh.isSelected = true;\n\t\t\t\tupdateMeshInteractionMaterial(mesh);\n\t\t\t}\n\t\t} else {\n\t\t\tif (isInMeasureMode) {\n\t\t\t\tif (activeLine) {\n\t\t\t\t\tlineScene.remove(activeLine);\n\t\t\t\t\tspriteScene.remove(activeLine.sprite1);\n\t\t\t\t\tspriteScene.remove(activeLine.sprite2);\n\t\t\t\t\tactiveLine = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction resetSelect() {\n\t\tscene.traverse(child => {\n\t\t\tchild.isSelected = false;\n\t\t\tif (child.isMesh && child.material) {\t\n\t\t\t\tupdateMeshInteractionMaterial(child);\n\t\t\t}\n\t\t\tupdateSelectDom(child);\n\t\t});\n\t}\n\t\t\n\n\trenderer.domElement.onmousemove = function(evt) {\n\t\tevt = evt || window.event;\n\n\t\tif (!isInMeasureMode) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tlet x = evt.offsetX;\n\t\tlet y = evt.offsetY;\n\t\tlet size = renderer.getSize(new THREE.Vector2());\n\t\tlet mouse = new THREE.Vector2(x / size.width * 2 - 1, -y / size.height * 2 + 1);\n\t\t\n\t\tlet raycaster = new THREE.Raycaster();\n\t\traycaster.setFromCamera(mouse, camera);\n\t\tlet intersects = raycaster.intersectObjects(loadedMeshes);\n\t\t\n\t\tif (isInMeasureMode && activeLine) {\n\t\t\tif (intersects.length > 0) {\n\t\t\t\tlet point = intersects[0].point;\n\t\t\t\tactiveLine.geometry.vertices[1].copy(point);\n\t\t\t\tactiveLine.geometry.verticesNeedUpdate = true;\n\t\t\t} else {\n\t\t\t\tactiveLine.geometry.vertices[1].copy(activeLine.geometry.vertices[0]);\n\t\t\t\tactiveLine.geometry.verticesNeedUpdate = true;\n\t\t\t}\n\n\t\t}\n\t}\n\n\t/*renderer.domElement.ontouchmove = function(e) {\n\t\tlet rect = e.target.getBoundingClientRect();\n\t\tlet x = e.targetTouches[0].pageX - rect.left;\n\t\tlet y = e.targetTouches[0].pageY - rect.top;\n\t\trenderer.domElement.onmousemove({\n\t\t\toffsetX: x,\n\t\t\toffsetY: y\n\t\t});\n\t}*/\n\n\trenderer.domElement.ontouchstart = function(e) {\n\t\tlet rect = e.target.getBoundingClientRect();\n\t\tlet x = e.targetTouches[0].pageX - rect.left;\n\t\tlet y = e.targetTouches[0].pageY - rect.top;\n\t\trenderer.domElement.onclick({\n\t\t\toffsetX: x,\n\t\t\toffsetY: y\n\t\t});\n\t}\n\n\tfunction makeDistanceSprite() {\n\n\t\tlet canvas = document.createElement('canvas');\n\t\tlet ctx = canvas.getContext('2d');\n\t\tlet fontsize = 32;\n\n\t\tctx.font = 'bolder ' + fontsize + 'px \"Open Sans\", Arial';\n\t\tlet v = activeLine.geometry.vertices;\n\t\tlet length = v[0].clone().sub(v[1]).length().toFixed(1);\n\t\tlet text = '~ ' + length;\n\t\tlet size = ctx.measureText(text);\n\t\tlet paddingLeft = 20;\n\t\tlet paddingTop = 10;\n\t\tlet margin = 10;\n\t\tcanvas.width = size.width + paddingLeft * 2 + margin * 2;\n\t\tcanvas.height = fontsize + paddingTop * 2 + margin * 2;\n\n\t\tctx.shadowBlur = 10;\n\t\tctx.shadowColor = '#555';\n\t\tctx.fillStyle = '#009bff';\n\t\troundRect(ctx, margin, margin, canvas.width - margin * 2, canvas.height - margin * 2, 10);\n\n\t\tctx.shadowBlur = 0;\n\t\tctx.fillStyle = '#fff';\n\t\tctx.textAlign = 'left';\n\t\tctx.textBaseline = 'top';\n\t\tctx.font = 'bolder ' + fontsize + 'px \"Open Sans\", Arial';\n\t\tctx.fillText(text, paddingLeft + margin, paddingTop + margin);\n\n\t\tlet texture = new THREE.CanvasTexture(canvas);\n\t\tlet sprite = new THREE.Sprite(new THREE.SpriteMaterial({\n\t\t\tmap: texture,\n\t\t\tsizeAttenuation: false\n\t\t}));\n\n\t\tlet h = 0.7;\n\t\tsprite.scale.set(0.002 * canvas.width, 0.0025 * canvas.height).multiplyScalar(h);\n\n\t\tsprite.position.copy(v[0].clone().add(v[1]).multiplyScalar(0.5));\n\t\tspriteScene.add(sprite);\n\n\t}\n\n\tfunction roundRect(ctx, x, y, w, h, r) { \n\t\tctx.beginPath(); \n\t\tctx.moveTo(x + r, y); \n\t\tctx.lineTo(x + w - r, y); \n\t\tctx.quadraticCurveTo(x + w, y, x + w, y + r); \n\t\tctx.lineTo(x + w, y + h - r); \n\t\tctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h); \n\t\tctx.lineTo(x + r, y + h); \n\t\tctx.quadraticCurveTo(x, y + h, x, y + h - r); \n\t\tctx.lineTo(x, y + r); \n\t\tctx.quadraticCurveTo(x, y, x + r, y); \n\t\tctx.closePath(); \n\t\tctx.fill();\n\t} \n\t\n\t\n\tfunction updateMeshInteractionMaterial(mesh) {\n\t\tif (mesh.isHidden) {\n\t\t\tmesh.interactionMaterial.color = hiddenColor;\n\t\t\tmesh.interactionMaterial.opacity = hiddenAlpha;\n\t\t} else {\n\t\t\tmesh.interactionMaterial.opacity = 1;\n\t\t}\n\t\tif (mesh.isSelected) {\n\t\t\tmesh.interactionMaterial.color = selectColor;\n\t\t\tmesh.itemWrapper.querySelector('.graph-name').style.color = '#03a9f4';\n\t\t} else {\n\t\t\tmesh.itemWrapper.querySelector('.graph-name').style.color = 'inherit';\n\t\t}\n\t\tmesh.interactionMaterial.needsUpdate = true;\n\t\tif (!mesh.isSelected && !mesh.isHidden) {\n\t\t\tmesh.material = mesh.defaultMaterial;\n\t\t} else {\n\t\t\tmesh.material = mesh.interactionMaterial;\n\t\t}\n\t}\n\t\n\tfunction onResize() {\n\t\tlet width = wrapper.offsetWidth;\n\t\tlet height = wrapper.offsetHeight;\n\t\trenderer.setSize(width, height, false);\n\t\tcamera.aspect = width / height;\n\t\tcamera.updateProjectionMatrix();\n\t}\n\t\n\tonResize();\n\t\n\twrapper.appendChild(renderer.domElement);\n\twindow.addEventListener('resize', onResize, false);\n\t\n\tlet gltfLoader = new THREE.GLTFLoader();\n\tlet loadedScene = null;\n\tlet loadedMeshes = [];\n\t\n\tlet d = 5;\n\n\tlet selectColor = new THREE.Color('#42006b');\n\tlet hiddenColor = new THREE.Color('#555');\n\tlet hiddenAlpha = 0.3;\n\n\tlet interactionMaterial = new THREE.MeshPhongMaterial({\n\t\ttransparent: true,\n\t\tcolor: selectColor,\n\t\tside: THREE.DoubleSide,\n\t\tprecision: 'mediump'\n\t});\n\t\n\tfunction loadModel(url) {\n\t\t\n\t\tresetAll();\n\t\tif (loadedScene) {\n\t\t\tscene.remove(loadedScene);\n\t\t\tloadedScene = null;\n\t\t\tloadedMeshes.length = 0;\n\t\t}\n\t\t\n\t\tshow(ViewerUI.loader);\n\t\tViewerUI.modelBrowserContent.innerHTML = '';\n\t\tViewerUI.loaderInfo.innerHTML = 'Loading model...';\n\t\t\n\t\tgltfLoader.load(\n\t\t\turl,\n\t\t\tfunction onLoad(gltf) {\n\t\t\t\t\n\t\t\t\tloadedScene = gltf.scene;\n\t\t\t\tscene.add(gltf.scene);\n\n\t\t\t\tgltf.scene = gltf.scene || gltf.scenes[0];\n\n\t\t\t\tlet object = gltf.scene;\n\n\t\t\t\tconst box = new THREE.Box3().setFromObject(object);\n\t\t\t\tconst size = box.getSize(new THREE.Vector3()).length();\n\t\t\t\tconst center = box.getCenter(new THREE.Vector3());\n\n\t\t\t\tcontroller.reset();\n\n\t\t\t\tobject.position.x += (object.position.x - center.x);\n\t\t\t\tobject.position.y += (object.position.y - center.y);\n\t\t\t\tobject.position.z += (object.position.z - center.z);\n\t\t\t\tcontroller.maxDistance = size * 10;\n\t\t\t\tcamera.near = size / 100;\n\t\t\t\tcamera.far = size * 100;\n\t\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\t\tcamera.position.copy(center);\n\t\t\t\tcamera.position.x += size / 2.0;\n\t\t\t\tcamera.position.y += size / 5.0;\n\t\t\t\tcamera.position.z += size / 2.0;\n\n\t\t\t\tdirectionalLight.position.setScalar(size);\n\n\t\t\t\tcamera.lookAt(center);\n\n\t\t\t\tcontroller.saveState();\n\n\t\t\t\tgltf.scene.traverse((node) => {\n\t\t\t\t\tif (node.isMesh && node.material) {\n\t\t\t\t\t\tnode.geometry.computeBoundingBox();\n\t\t\t\t\t\tnode.material.side = THREE.DoubleSide;\n\t\t\t\t\t\tnode.material.precision = 'mediump';\n\t\t\t\t\t\tnode.material.needsUpdate = true;\n\t\t\t\t\t\tnode.interactionMaterial = interactionMaterial.clone();\n\t\t\t\t\t\tnode.defaultMaterial = node.material;\n\t\t\t\t\t\tnode.defaultPositionArray = Array.from(node.geometry.attributes.position.array);\n\t\t\t\t\t\tnode.defaultPosition = node.position.clone();\n\t\t\t\t\t\tloadedMeshes.push(node);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tlet content = ViewerUI.modelBrowserContent;\n\t\t\t\tlet counter = 0;\n\t\t\t\tlet parentLevel = 0;\n\n\t\t\t\tfunction makeSceneGraph(obj) {\n\t\t\t\t\t\n\t\t\t\t\tif (obj.children.length === 0 && !obj.isMesh) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet itemWrapper = document.createElement('div');\n\t\t\t\t\titemWrapper.classList.add('graph-item-wrapper');\n\t\t\t\t\t\n\t\t\t\t\tlet item = document.createElement('div');\n\t\t\t\t\titem.classList.add('graph-item');\n\t\t\t\t\t\n\t\t\t\t\titemWrapper.appendChild(item);\n\t\t\t\t\t\n\t\t\t\t\tcontent.appendChild(itemWrapper);\n\t\t\t\t\tlet n = 0;\n\t\t\t\t\tlet obj2 = obj;\n\t\t\t\t\twhile (obj2 != gltf.scene) {\n\t\t\t\t\t\tobj2 = obj2.parent;\n\t\t\t\t\t\tn++;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\titem.style.paddingLeft = n * 1.5 + 'em';\n\t\t\t\t\tobj.itemWrapper = itemWrapper;\n\t\t\t\t\t\n\t\t\t\t\tlet left = document.createElement('div');\n\t\t\t\t\tleft.classList.add('graph-left');\n\t\t\t\t\tlet right = document.createElement('div');\n\t\t\t\t\tright.classList.add('graph-right');\n\t\t\t\t\titem.appendChild(left);\n\t\t\t\t\titem.appendChild(right);\n\t\t\t\t\t\n\t\t\t\t\tif (obj.children.length > 0) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tparentLevel++;\n\t\t\t\t\t\tlet folder = document.createElement('div');\n\t\t\t\t\t\t\n\t\t\t\t\t\tfolder.style.marginRight = '10px';\n\t\t\t\t\t\tfolder.classList.add('graph-folder');\n\t\t\t\t\t\tfolder.innerHTML = '<i class=\"fa fa-folder-open\"></i>';\n\t\t\t\t\t\tleft.appendChild(folder);\n\t\t\t\t\t\t\n\t\t\t\t\t\tobj.isFolderOpen = true;\n\t\t\t\t\t\tobj.openFolder = function() {\n\t\t\t\t\t\t\tfolder.innerHTML = obj.isFolderOpen ? '<i class=\"fa fa-folder-open\"></i>' :  '<i class=\"fa fa-folder\"></i>';\n\t\t\t\t\t\t\tobj.traverse(child => {\n\t\t\t\t\t\t\t\tif (obj === child) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (child.itemWrapper) {\n\t\t\t\t\t\t\t\t\tif (child.parent.isFolderOpen && obj.isFolderOpen) {\n\t\t\t\t\t\t\t\t\t\tchild.itemWrapper.style.display = 'block';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (!obj.isFolderOpen) {\n\t\t\t\t\t\t\t\t\t\tchild.itemWrapper.style.display = 'none';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tfolder.onclick = () => {\n\t\t\t\t\t\t\tobj.isFolderOpen = !obj.isFolderOpen;\n\t\t\t\t\t\t\tobj.openFolder();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (let i = 0; i < obj.children.length; i++) {\n\t\t\t\t\t\t\tmakeSceneGraph(obj.children[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet name = document.createElement('div');\n\t\t\t\t\tname.classList.add('graph-name');\n\t\t\t\t\tname.innerHTML = obj.name || 'None';\n\t\t\t\t\tleft.appendChild(name);\n\t\t\t\t\t\n\t\t\t\t\tname.onclick = function() {\n\t\t\t\t\t\tresetSelect();\n\t\t\t\t\t\tobj.traverse(child => {\t\n\t\t\t\t\t\t\tchild.isSelected = true;\n\t\t\t\t\t\t\tif (child.isMesh && child.material) {\n\t\t\t\t\t\t\t\tupdateMeshInteractionMaterial(child);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tupdateSelectDom(child)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet visible = document.createElement('div');\n\t\t\t\t\tvisible.classList.add('graph-visible');\n\t\t\t\t\tvisible.innerHTML = '<i class=\"fa fa-eye\"></i>';\n\t\t\t\t\t\n\t\t\t\t\tobj.showMesh = function() {\n\t\t\t\t\t\tvisible.innerHTML = obj.isMeshVisible ? '<i class=\"fa fa-eye\"></i>' : '<i class=\"fa fa-eye-slash\"></i>';\n\t\t\t\t\t\tobj.traverse(child => {\n\t\t\t\t\t\t\tif (child.itemWrapper) {\n\t\t\t\t\t\t\t\tlet eye = child.itemWrapper.querySelector('.graph-visible');\n\t\t\t\t\t\t\t\teye.innerHTML = obj.isMeshVisible ? '<i class=\"fa fa-eye\"></i>' : '<i class=\"fa fa-eye-slash\"></i>';\n\t\t\t\t\t\t\t\teye.style.color = obj.isMeshVisible ? 'inherit' : 'rgba(0, 0, 0, 0.3)';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (child.isMesh && child.material) {\n\t\t\t\t\t\t\t\tchild.isHidden = !obj.isMeshVisible;\n\t\t\t\t\t\t\t\tupdateMeshInteractionMaterial(child);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tobj.isHidden = false;\n\t\t\t\t\tobj.isSelected = false;\n\t\t\t\t\tobj.isMeshVisible = true;\n\t\t\t\t\tvisible.onclick = function() {\n\t\t\t\t\t\tobj.isMeshVisible = !obj.isMeshVisible;\n\t\t\t\t\t\tobj.showMesh();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tright.appendChild(visible)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmakeSceneGraph(gltf.scene)\n\n\t\t\t\thide(ViewerUI.loader);\n\t\t\t\t\n\t\t\t},\n\t\t\tfunction onProgress(xhr) {\n\t\t\t\tViewerUI.loaderInfo.innerHTML = Math.round(xhr.loaded / xhr.total * 100) + '% loaded';\n\t\t\t},\n\t\t\tfunction onError(err) {\n\t\t\t\tViewerUI.loaderInfo.innerHTML = 'Error loading model! See console for more info.';\n\t\t\t\tconsole.error('Error loading model!', err);\n\t\t\t}\n\t\t);\n\t\t\n\t}\n\t\n\tlet controller = new THREE.OrbitControls(camera, renderer.domElement);\n\tcontroller.enabled = true;\n\tcontroller.enableDamping = true;\n\tcontroller.dampingFactor = 0.5;\n\tcontroller.screenSpacePanning = true;\n\n\tlet cubeController = new THREE.OrbitControls(camera, cubeRenderer.domElement);\n\tcubeController.enablePan = false;\n\tcubeController.enableZoom = false;\n\tcubeController.rotateSpeed = 0.125;\n\t\n\tlet selectedModeElement = ViewerUI.toggleOrbit;\n\tsetOrbitMode();\n\n\tcamera.position.z = d;\n\tcamera.lookAt(scene.position);\n\tcontroller.update();\n\tcontroller.saveState();\n\t\n\tlet ambientLight = new THREE.AmbientLight();\n\tambientLight.intensity = 1;\n\tscene.add(ambientLight);\n\n\tlet directionalLight = new THREE.DirectionalLight();\n\tdirectionalLight.position.set(200, 200, 200)\n\tdirectionalLight.intensity = 0.5;\n\tscene.add(directionalLight);\n\t\n\t/*let light1 = new THREE.PointLight(0xffffff);\n\tlight1.position.set(100, 100, 100);\n\tscene.add(light1);\n\t\n\tlet light2 = new THREE.PointLight(0xffffff);\n\tlight2.position.set(100, 100, -100);\n\tscene.add(light2);\n\t\n\tlet light3 = new THREE.PointLight(0xffffff);\n\tlight3.position.set(-100, 100, 100);\n\tscene.add(light3);\n\t\n\tlet light4 = new THREE.PointLight(0xffffff);\n\tlight4.position.set(-100, 100, -100);\n\tscene.add(light4);\n\t\n\tlight1.intensity = light2.intensity = light3.intensity = light4.intensity = 0.3;*/\n\t\n\tlet stop = false;\n\n\tfunction renderAll() {\n\n\t\trenderer.clear();\n\t\trenderer.render(scene, camera);\n\t\tupdateCubeCamera();\n\t\tcubeRenderer.render(cubeScene, cubeCamera);\n\n\t\trenderer.clearDepth();\n\n\t\tif (isInMeasureMode) {\n\t\t\trenderer.clearDepth();\n\t\t\trenderer.render(lineScene, camera);\n\t\t\trenderer.clearDepth();\n\t\t\trenderer.render(spriteScene, camera);\n\t\t}\n\t}\n\t\n\tfunction animate(time) {\n\n\t\tif (stop) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (play) {\n\t\t\tlet now = Date.now();\n\t\t\tlet x = Math.min(1, (now - startTime) / duration);\n\t\t\tcamera.position.copy(oldPosition).lerp(newPosition, x)\n\t\t\tif (x === 1) {\n\t\t\t\tplay = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\trequestAnimationFrame(animate);\n\t\tcontroller.update();\n\t\trenderAll();\n\t}\n\t\n\trequestAnimationFrame(animate);\n\t\n\treturn {\n\t\tloadModel: loadModel\n\t};\n\t\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}